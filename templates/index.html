{% extends "base.html" %}

{% block tail %}
    <script>
        $(document).ready(function(){
            $(".submission").click(function(){
                var submission_text = $(this).find(".submission_text");
                if (submission_text.hasClass("hide")) {
                    submission_text.removeClass("hide");
                } else {
                    submission_text.addClass("hide");
                }
            });

            $(".vote").click(function(ev){

                if (typeof ga != "undefined"){
                    if ($(this).hasClass("vote_up")){
                        ga('send', 'vote', 'up', {
                            'hitCallback': function() {
                                $(this).parent().submit();
                            }
                        });
                    }else {
                        ga('send', 'vote', 'down', {
                            'hitCallback': function() {
                                $(this).parent().submit();
                            }
                        });
                    }
                } else {
                    $(this).parent().submit();
                }

                ev.preventDefault();
                ev.stopPropagation();
            });

            {% if session.a %}
                $(".del").click(function(ev){
                    $(this).parent().parent().submit();
                    ev.preventDefault();
                    ev.stopPropagation();
                });

            {% endif %}
        });
    </script>
{% endblock %}

{% block content %}
    <div class="row">
        <div id="add_form" class="large-4 hide-for-medium-down columns">
            {% include "add_form.html"%}
        </div>

        <div class="large-8 columns results_container">
        {% block results_container %}
            {% for post, vote in posts %}
                {% include "view_post.html" %}
            {% endfor %}
        {% endblock %}
        </div>

    </div>
{% endblock %}